import{P as h,r as g,k as a,p as r,F as k,q as w,ai as C,b0 as I,a5 as b,c as x,w as v,o as S,S as B,E as R,v as D,y as T,j as V,l as q,B as N,x as A,a9 as E}from"./index.f4c3336a.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";import{u as U}from"./auth.5978188a.js";const K=["onUpdate:modelValue","autofocus","onKeydown"],M={__name:"OTPInput",props:{default:String,digitCount:{type:Number,required:!0}},emits:["update:otp"],setup(y,{expose:s,emit:i}){const o=y;s({clearInput:()=>{for(let t=0;t<o.digitCount;t++)e[t]=null}});const e=h([]);if(o.default&&o.default.length===o.digitCount)for(let t=0;t<o.digitCount;t++)e[t]=o.default.charAt(t);else for(let t=0;t<o.digitCount;t++)e[t]=null;const c=g(null),p=i,f=function(){for(const t of e)if(t==null||t==null)return!1;return!0},d=function(t,n){if(t.key!=="Tab"&&t.key!=="ArrowRight"&&t.key!=="ArrowLeft"&&t.preventDefault(),t.key==="Backspace"){e[n]=null,n!=0&&c.value.children[n-1].focus();return}new RegExp("^([0-9])$").test(t.key)&&(e[n]=t.key,n!=o.digitCount-1&&c.value.children[n+1].focus(),f()&&p("update:otp",e.join("")))};return(t,n)=>(a(),r("div",{ref_key:"otpCont",ref:c},[(a(!0),r(k,null,w(e,(_,l)=>C((a(),r("input",{type:"text",class:b(["digit-box",{bounce:e[l]!==null}]),key:_+l,"onUpdate:modelValue":m=>e[l]=m,autofocus:l===0,placeholder:0,maxlength:"1",onKeydown:m=>d(m,l)},null,42,K)),[[I,e[l]]])),128))],512))}};var P=F(M,[["__scopeId","data-v-5a87b4f5"]]);const Q={class:"text-center"},$={key:0},j={key:1},z={key:1,class:"q-mt-md"},H={__name:"ConfirmRegistrationCode",setup(y){const s=U(),i=g(""),o=g(null),u=x(()=>s.registration);v(i,(t,n)=>{t.length==4&&c()}),v(u.value,(t,n)=>{t.code==""&&o.value.clearInput(),t.countdown>0&&p===null&&d()});const e=()=>{s.registration.code="",o.value.clearInput(),s.submitRegistration()},c=()=>{s.registration.code=i.value,s.submitRegistration()};let p=null;const f=()=>{u.value.countdown--,u.value.countdown===0&&clearInterval(p)},d=()=>{p=setInterval(f,1e3)};return S(()=>{u.value.countdown>0&&d()}),B(()=>{}),(t,n)=>(a(),r("div",Q,[R("p",null,[D("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0434 \u0438\u0437 "),T(s).auth_type=="phone"?(a(),r("span",$,"SMS")):(a(),r("span",j,"email"))]),V(P,{"digit-count":4,"onUpdate:otp":n[0]||(n[0]=_=>i.value=_),ref_key:"otpInput",ref:o},null,512),u.value.isRequest?(a(),q(E,{key:0,color:"primary",size:"3em"})):N("",!0),u.value.countdown>0?(a(),r("p",z,"\u041D\u043E\u0432\u044B\u0439 \u043A\u043E\u0434 \u043C\u043E\u0436\u043D\u043E \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0447\u0435\u0440\u0435\u0437 "+A(u.value.countdown)+" \u0441\u0435\u043A\u0443\u043D\u0434.",1)):(a(),r("p",{key:2,class:"q-mt-md",onClick:e,style:{color:"#F55E25"}},"\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u043A\u043E\u0434"))]))}};export{H as default};
