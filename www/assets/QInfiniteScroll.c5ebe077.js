import{h as n,H,aW as _,aX as k,an as O,r as m,c as L,w as v,aC as R,aB as W,S as j,o as z,U as F,J,ap as X,aY as h,as as B,aq as E,aZ as P,ao as Y,a_ as I,aV as Z,g as $}from"./index.f4c3336a.js";const G=[n("circle",{cx:"15",cy:"15",r:"15"},[n("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),n("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),n("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[n("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),n("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),n("circle",{cx:"105",cy:"15",r:"15"},[n("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),n("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var ee=H({name:"QSpinnerDots",props:_,setup(a){const{cSize:u,classes:b}=k(a);return()=>n("svg",{class:b.value,fill:"currentColor",width:u.value,height:u.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},G)}});const{passive:o}=X;var te=H({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:O,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(a,{slots:u,emit:b}){const s=m(!1),i=m(!0),d=m(null),S=m(null);let g=a.initialIndex,e,l;const A=L(()=>"q-infinite-scroll__loading"+(s.value===!0?"":" invisible"));function c(){if(a.disable===!0||s.value===!0||i.value===!1)return;const t=h(e),r=E(e),f=I(e);a.reverse===!1?Math.round(r+f+a.offset)>=Math.round(t)&&y():Math.round(r)<=a.offset&&y()}function y(){if(a.disable===!0||s.value===!0||i.value===!1)return;g++,s.value=!0;const t=h(e);b("load",g,r=>{i.value===!0&&(s.value=!1,B(()=>{if(a.reverse===!0){const f=h(e),U=E(e),V=f-t;P(e,U+V)}r===!0?p():d.value&&d.value.closest("body")&&l()}))})}function D(){g=0}function T(){i.value===!1&&(i.value=!0,e.addEventListener("scroll",l,o)),c()}function p(){i.value===!0&&(i.value=!1,s.value=!1,e.removeEventListener("scroll",l,o),l!==void 0&&l.cancel!==void 0&&l.cancel())}function x(){if(e&&i.value===!0&&e.removeEventListener("scroll",l,o),e=Y(d.value,a.scrollTarget),i.value===!0){if(e.addEventListener("scroll",l,o),a.reverse===!0){const t=h(e),r=I(e);P(e,t-r)}c()}}function Q(t){g=t}function w(t){t=parseInt(t,10);const r=l;l=t<=0?c:Z(c,isNaN(t)===!0?100:t),e&&i.value===!0&&(r!==void 0&&e.removeEventListener("scroll",r,o),e.addEventListener("scroll",l,o))}function N(t){if(C.value===!0){if(S.value===null){t!==!0&&B(()=>{N(!0)});return}const r=`${s.value===!0?"un":""}pauseAnimations`;Array.from(S.value.getElementsByTagName("svg")).forEach(f=>{f[r]()})}}const C=L(()=>a.disable!==!0&&i.value===!0);v([s,C],()=>{N()}),v(()=>a.disable,t=>{t===!0?p():T()}),v(()=>a.reverse,()=>{s.value===!1&&i.value===!0&&c()}),v(()=>a.scrollTarget,x),v(()=>a.debounce,w);let M=!1;R(()=>{M!==!1&&e&&P(e,M)}),W(()=>{M=e?E(e):!1}),j(()=>{i.value===!0&&e.removeEventListener("scroll",l,o)}),z(()=>{w(a.debounce),x(),s.value===!1&&N()});const q=$();return Object.assign(q.proxy,{poll:()=>{l!==void 0&&l()},trigger:y,stop:p,reset:D,resume:T,setIndex:Q,updateScrollTarget:x}),()=>{const t=F(u.default,[]);return C.value===!0&&t[a.reverse===!1?"push":"unshift"](n("div",{ref:S,class:A.value},J(u.loading))),n("div",{class:"q-infinite-scroll",ref:d},t)}}});export{ee as Q,te as a};
