import{T as we}from"./TouchPan.ea547dd3.js";import{aH as Be,r as $,c as t,aM as Te,aN as z,R as Ne,aG as Fe,aO as Ie,g as ze,a3 as L,Z as Ae,h as u,aI as Pe,aP as Re}from"./index.02d76a3b.js";const J="q-slider__marker-labels",De=n=>({value:n}),je=({marker:n})=>u("div",{key:n.value,style:n.style,class:n.classes},n.label),Ee=[34,37,40,33,39,38],He={...Fe,...Ie,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:n=>n>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Ke=["pan","update:modelValue","change"];function Ue({updateValue:n,updatePosition:p,getDragging:M,formAttrs:Q}){const{props:a,emit:A,slots:q,proxy:{$q:_}}=ze(),Y=Be(a,_),V=Re(Q),m=$(!1),k=$(!1),v=$(!1),h=$(!1),i=t(()=>a.vertical===!0?"--v":"--h"),ee=t(()=>"-"+(a.switchLabelSide===!0?"switched":"standard")),b=t(()=>a.vertical===!0?a.reverse===!0:a.reverse!==(_.lang.rtl===!0)),d=t(()=>isNaN(a.innerMin)===!0||a.innerMin<a.min?a.min:a.innerMin),f=t(()=>isNaN(a.innerMax)===!0||a.innerMax>a.max?a.max:a.innerMax),C=t(()=>a.disable!==!0&&a.readonly!==!0&&d.value<f.value),P=t(()=>{if(a.step===0)return r=>r;const e=(String(a.step).trim().split(".")[1]||"").length;return r=>parseFloat(r.toFixed(e))}),R=t(()=>a.step===0?1:a.step),ae=t(()=>C.value===!0?a.tabindex||0:-1),x=t(()=>a.max-a.min),D=t(()=>f.value-d.value),g=t(()=>B(d.value)),w=t(()=>B(f.value)),S=t(()=>a.vertical===!0?b.value===!0?"bottom":"top":b.value===!0?"right":"left"),j=t(()=>a.vertical===!0?"height":"width"),te=t(()=>a.vertical===!0?"width":"height"),E=t(()=>a.vertical===!0?"vertical":"horizontal"),re=t(()=>{const e={role:"slider","aria-valuemin":d.value,"aria-valuemax":f.value,"aria-orientation":E.value,"data-step":a.step};return a.disable===!0?e["aria-disabled"]="true":a.readonly===!0&&(e["aria-readonly"]="true"),e}),le=t(()=>`q-slider q-slider${i.value} q-slider--${m.value===!0?"":"in"}active inline no-wrap `+(a.vertical===!0?"row":"column")+(a.disable===!0?" disabled":" q-slider--enabled"+(C.value===!0?" q-slider--editable":""))+(v.value==="both"?" q-slider--focus":"")+(a.label||a.labelAlways===!0?" q-slider--label":"")+(a.labelAlways===!0?" q-slider--label-always":"")+(Y.value===!0?" q-slider--dark":"")+(a.dense===!0?" q-slider--dense q-slider--dense"+i.value:""));function y(e){const r="q-slider__"+e;return`${r} ${r}${i.value} ${r}${i.value}${ee.value}`}function O(e){const r="q-slider__"+e;return`${r} ${r}${i.value}`}const se=t(()=>{const e=a.selectionColor||a.color;return"q-slider__selection absolute"+(e!==void 0?` text-${e}`:"")}),ne=t(()=>O("markers")+" absolute overflow-hidden"),oe=t(()=>O("track-container")),ue=t(()=>y("pin")),ie=t(()=>y("label")),ce=t(()=>y("text-container")),ve=t(()=>y("marker-labels-container")+(a.markerLabelsClass!==void 0?` ${a.markerLabelsClass}`:"")),de=t(()=>"q-slider__track relative-position no-outline"+(a.trackColor!==void 0?` bg-${a.trackColor}`:"")),me=t(()=>{const e={[te.value]:a.trackSize};return a.trackImg!==void 0&&(e.backgroundImage=`url(${a.trackImg}) !important`),e}),be=t(()=>"q-slider__inner absolute"+(a.innerTrackColor!==void 0?` bg-${a.innerTrackColor}`:"")),G=t(()=>{const e=w.value-g.value,r={[S.value]:`${100*g.value}%`,[j.value]:e===0?"2px":`${100*e}%`};return a.innerTrackImg!==void 0&&(r.backgroundImage=`url(${a.innerTrackImg}) !important`),r});function fe(e){const{min:r,max:l,step:s}=a;let o=r+e*(l-r);if(s>0){const c=(o-d.value)%s;o+=(Math.abs(c)>=s/2?(c<0?-1:1)*s:0)-c}return o=P.value(o),L(o,d.value,f.value)}function B(e){return x.value===0?0:(e-a.min)/x.value}function pe(e,r){const l=Ae(e),s=a.vertical===!0?L((l.top-r.top)/r.height,0,1):L((l.left-r.left)/r.width,0,1);return L(b.value===!0?1-s:s,g.value,w.value)}const H=t(()=>Te(a.markers)===!0?a.markers:R.value),K=t(()=>{const e=[],r=H.value,l=a.max;let s=a.min;do e.push(s),s+=r;while(s<l);return e.push(l),e}),U=t(()=>{const e=` ${J}${i.value}-`;return J+`${e}${a.switchMarkerLabelsSide===!0?"switched":"standard"}${e}${b.value===!0?"rtl":"ltr"}`}),T=t(()=>a.markerLabels===!1?null:he(a.markerLabels).map((e,r)=>({index:r,value:e.value,label:e.label||e.value,classes:U.value+(e.classes!==void 0?" "+e.classes:""),style:{...X(e.value),...e.style||{}}}))),W=t(()=>({markerList:T.value,markerMap:Ce.value,classes:U.value,getStyle:X})),ke=t(()=>{const e=D.value===0?"2px":100*H.value/D.value;return{...G.value,backgroundSize:a.vertical===!0?`2px ${e}%`:`${e}% 2px`}});function he(e){if(e===!1)return null;if(e===!0)return K.value.map(De);if(typeof e=="function")return K.value.map(l=>{const s=e(l);return z(s)===!0?{...s,value:l}:{value:l,label:s}});const r=({value:l})=>l>=a.min&&l<=a.max;return Array.isArray(e)===!0?e.map(l=>z(l)===!0?l:{value:l}).filter(r):Object.keys(e).map(l=>{const s=e[l],o=Number(l);return z(s)===!0?{...s,value:o}:{value:o,label:s}}).filter(r)}function X(e){return{[S.value]:`${100*(e-a.min)/x.value}%`}}const Ce=t(()=>{if(a.markerLabels===!1)return null;const e={};return T.value.forEach(r=>{e[r.value]=r}),e});function xe(){if(q["marker-label-group"]!==void 0)return q["marker-label-group"](W.value);const e=q["marker-label"]||je;return T.value.map(r=>e({marker:r,...W.value}))}const ge=t(()=>[[we,Se,void 0,{[E.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Se(e){e.isFinal===!0?(h.value!==void 0&&(p(e.evt),e.touch===!0&&n(!0),h.value=void 0,A("pan","end")),m.value=!1,v.value=!1):e.isFirst===!0?(h.value=M(e.evt),p(e.evt),n(),m.value=!0,A("pan","start")):(p(e.evt),n())}function Z(){v.value=!1}function ye(e){p(e,M(e)),n(),k.value=!0,m.value=!0,document.addEventListener("mouseup",N,!0)}function N(){k.value=!1,m.value=!1,n(!0),Z(),document.removeEventListener("mouseup",N,!0)}function $e(e){p(e,M(e)),n(!0)}function Le(e){Ee.includes(e.keyCode)&&n(!0)}function Me(e){if(a.vertical===!0)return null;const r=_.lang.rtl!==a.reverse?1-e:e;return{transform:`translateX(calc(${2*r-1} * ${a.thumbSize} / 2 + ${50-100*r}%))`}}function qe(e){const r=t(()=>k.value===!1&&(v.value===e.focusValue||v.value==="both")?" q-slider--focus":""),l=t(()=>`q-slider__thumb q-slider__thumb${i.value} q-slider__thumb${i.value}-${b.value===!0?"rtl":"ltr"} absolute non-selectable`+r.value+(e.thumbColor.value!==void 0?` text-${e.thumbColor.value}`:"")),s=t(()=>({width:a.thumbSize,height:a.thumbSize,[S.value]:`${100*e.ratio.value}%`,zIndex:v.value===e.focusValue?2:void 0})),o=t(()=>e.labelColor.value!==void 0?` text-${e.labelColor.value}`:""),c=t(()=>Me(e.ratio.value)),F=t(()=>"q-slider__text"+(e.labelTextColor.value!==void 0?` text-${e.labelTextColor.value}`:""));return()=>{const I=[u("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[u("path",{d:a.thumbPath})]),u("div",{class:"q-slider__focus-ring fit"})];return(a.label===!0||a.labelAlways===!0)&&(I.push(u("div",{class:ue.value+" absolute fit no-pointer-events"+o.value},[u("div",{class:ie.value,style:{minWidth:a.thumbSize}},[u("div",{class:ce.value,style:c.value},[u("span",{class:F.value},e.label.value)])])])),a.name!==void 0&&a.disable!==!0&&V(I,"push")),u("div",{class:l.value,style:s.value,...e.getNodeData()},I)}}function _e(e,r,l,s){const o=[];a.innerTrackColor!=="transparent"&&o.push(u("div",{key:"inner",class:be.value,style:G.value})),a.selectionColor!=="transparent"&&o.push(u("div",{key:"selection",class:se.value,style:e.value})),a.markers!==!1&&o.push(u("div",{key:"marker",class:ne.value,style:ke.value})),s(o);const c=[Pe("div",{key:"trackC",class:oe.value,tabindex:r.value,...l.value},[u("div",{class:de.value,style:me.value},o)],"slide",C.value,()=>ge.value)];if(a.markerLabels!==!1){const F=a.switchMarkerLabelsSide===!0?"unshift":"push";c[F](u("div",{key:"markerL",class:ve.value},xe()))}return c}return Ne(()=>{document.removeEventListener("mouseup",N,!0)}),{state:{active:m,focus:v,preventFocus:k,dragging:h,editable:C,classes:le,tabindex:ae,attributes:re,roundValueFn:P,keyStep:R,trackLen:x,innerMin:d,innerMinRatio:g,innerMax:f,innerMaxRatio:w,positionProp:S,sizeProp:j,isReversed:b},methods:{onActivate:ye,onMobileClick:$e,onBlur:Z,onKeyup:Le,getContent:_e,getThumbRenderFn:qe,convertRatioToModel:fe,convertModelToRatio:B,getDraggingRatio:pe}}}export{Ke as a,Ue as b,Ee as k,He as u};
