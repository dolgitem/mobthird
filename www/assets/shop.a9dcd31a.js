import{aR as i,ag as n,aa as c,aS as a}from"./index.d21efca5.js";const p=i("shop",{state:()=>({categories:[],passes:[],pass:{},grouptypes:[],checkout:{},promocode:"",spendBonuses:0,loading:!1,loadingCheckout:!1}),getters:{maxBonuses:t=>{const s=n().client.bonusBalance,e=c().settings.maxBonusPaymentPercentPass,r=t.checkout.totalPriceWithoutBonuses;if(e>0){const o=parseInt(e*r/100);return s==0?0:s<o?s:isNaN(o)?0:o}else return 0}},actions:{async getData(t=!1){try{t||(this.loading=!0),this.passes=[],this.categories=[];const s=await a.get("/shop/categories");this.categories=s.data;const e=await a.get("/shop/passes");this.passes=e.data,t||(this.loading=!1)}catch(s){throw s}},async getPass(t){try{this.loading=!0,this.pass={},this.grouptypes=[];const s=await a.get(`/shop/passes/${t}`);this.pass=s.data,this.grouptypes=s.data.groupTypes,this.loading=!1}catch(s){throw s}},async getPassPrice(t){try{this.loadingCheckout=!0,this.checkout={};const s=await a.get(`/shop/passes/${t}/price`,{params:{promocode:this.promocode,spendBonuses:this.spendBonuses}});this.checkout=s.data,this.loadingCheckout=!1}catch(s){throw s}}}});export{p as u};
